import{a as g}from"./chunk-T6CLRISC.js";import{a as u}from"./chunk-TMHMHBU4.js";import{C as o,P as n,T as p,Y as a,t as s}from"./chunk-YTQLSVMJ.js";var m=class e{constructor(t){this.http=t}_user=null;_name="";login(t,r){return this.http.post(`${this.ip}`,{email:t,password:r}).pipe(n(i=>{this._user=i}))}register(t,r,i,h,l,c,f,_){return this.http.post(`${this.ip}/register`,{name:t,surname:r,address:i,email:h,cif:l,phone:c,bornDate:f,password:_}).pipe(n(v=>{this._user=v}))}renewToken(){return this.http.get(`${this.ip}/renew-token`).pipe(s(t=>(this._user=t,!0)),o(t=>t))}get user(){return this._user}get name(){return this._name=this.user().name,this._name}logout(){this._user=null,localStorage.removeItem("token")}get isAdmin(){return this._user.role.toUpperCase()==="ADMIN"}get ip(){return g.URL_API+"login"}static \u0275fac=function(r){return new(r||e)(a(u))};static \u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})};export{m as a};
